var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{Z:()=>s});class s{constructor(e){return e.select?(this.select=document.querySelector(`#${e.select}`),this.isMulti=this.select.multiple,this.select?(this.idSelect=`c-select${this.uniqueID()}`,this.options=this.select.querySelectorAll("option"),this.createHTML(),this.createOptionList(),this.firstOptionItem=document.querySelector(`#${this.idSelect} .c-select__dropdown-item:first-of-type`),this.selectOptions=document.querySelectorAll(`#${this.idSelect} option`),this.setEventListeners(e),this.filterOptionItems(),this.input=document.querySelector(`#${this.idSelect} .c-select__input`),this.selectedDiv=document.querySelector(`#${this.idSelect} .c-select__selected`),this.inputDiv=document.querySelector(`#${this.idSelect} .c-select__input-div`),this.arrowIcon=document.querySelector(`#${this.idSelect} .c-select__arrow-icon`),this.dropdown=document.querySelector(`#${this.idSelect} .c-select__dropdown`),this.SPACEBAR_KEY_CODE=32,this.ENTER_KEY_CODE=13,this.UP_KEY_CODE=38,this.DOWN_KEY_CODE=40,void(this.dropdownItems=document.querySelectorAll(`#${this.idSelect} .c-select__dropdown-item`))):console.log(`select element with id '${e.select}' not found`)):console.log("provide id of select element")}uniqueID(){return Math.floor(Math.random()*Date.now()).toString()}getSelectedItems(){return document.querySelectorAll(`#${this.idSelect} .c-select__selected-div`)}removeElem(e){e&&e.remove()}createOptionList(){for(let e=1;e<this.options.length;e++){const t=document.createElement("li"),s=document.querySelector(`#${this.idSelect} .c-select__dropdown`);t.classList.add("c-select__dropdown-item"),t.textContent=this.options[e].value,t.tabIndex="0",s.appendChild(t)}}setEventListeners(){document.querySelector(`#${this.idSelect} .c-select__option-list`).addEventListener("click",(e=>this.handleClick(e))),document.querySelector("body").addEventListener("click",(e=>this.handleOutsideClick(e))),document.querySelectorAll(`#${this.idSelect} .c-select__dropdown-item`).forEach((e=>e.addEventListener("keydown",(e=>this.handleKeyboard(e))))),document.querySelectorAll(".c-select__dropdown-item").forEach((e=>{e.addEventListener("focus",(e=>e.target.focus()))}))}handleClick(e){const t=document.querySelectorAll(".c-select__option-list .active");(e.target.classList.contains("c-select__selected")||e.target.classList.contains("c-select__arrow")||e.target.classList.contains("c-select__arrow-icon"))&&(this.input.value="",this.input.dispatchEvent(new Event("input")),this.selectedDiv.classList.toggle("active"),this.inputDiv.classList.toggle("active"),this.arrowIcon.classList.toggle("active"),this.dropdown.classList.toggle("active"),t.length>=4&&t.forEach((e=>{e.dataset.id!==this.idSelect&&e.classList.toggle("active")}))),e.target.classList.contains("c-select__dropdown-item")&&this.handleOptionItemsClick(e,this.selectedDiv),(e.currentTarget.classList.contains("c-select__selected-remove")||e.currentTarget.classList.contains("c-select__selected-remove_single"))&&this.handleSelectedClick(e,this.selectOptions)}handleSelectedClick(e,t){const s=this.isMulti?e.currentTarget.previousSibling.textContent:this.getSelectedItems()[0].textContent,i=this.isMulti?e.currentTarget.parentElement:this.getSelectedItems()[0],c=document.querySelector(`#${this.idSelect} .c-select__selected-remove_single`);c&&c.classList.add("scale-down"),i.classList.add("scale-down"),setInterval((()=>{this.removeElem(i),!this.isMulti&&this.removeElem(c)}),280);const l=document.querySelectorAll(".c-select__dropdown-item_selected");[...t].find((e=>e.value===s)).selected=!1,[...l].find((e=>e.textContent===i.textContent)).classList.remove("c-select__dropdown-item_selected")}handleOptionItemsClick(e,t){if(e.target===this.firstOptionItem)return;const s=[],i=t.querySelectorAll(".c-select__selected-div");i.forEach((e=>s.push(e.textContent))),!s.includes(e.target.textContent)&&this.addToSelected(e,this.selectOptions,t,i),e.target.classList.add("c-select__dropdown-item_selected")}addToSelected(e,t,s,i){!this.isMulti&&i.length>0&&this.handleSingleSelect(i),[...t].find((t=>t.value===e.target.textContent)).selected=!0;const c=document.createElement("div"),l=document.createElement("p");c.classList.add("c-select__selected-div"),l.classList.add("c-select__selected-p"),l.textContent=e.target.textContent,c.appendChild(l);const n=document.createElement("button");n.addEventListener("click",(e=>this.handleClick(e))),this.isMulti?(n.classList.add("c-select__selected-remove"),n.innerHTML='<svg viewBox="-2 3 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19"\n            stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',c.appendChild(n)):(this.removeElem(document.querySelector(`#${this.idSelect} .c-select__selected-remove_single`)),n.classList.add("c-select__selected-remove_single"),n.innerHTML='<svg viewBox="0 2 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19"\n            stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',this.selectedDiv.appendChild(n)),s.appendChild(c)}handleSingleSelect(e){document.querySelector(".c-select__dropdown-item_selected").classList.remove("c-select__dropdown-item_selected"),this.removeElem(e[0])}handleOutsideClick(e){const t=document.querySelector(`#${this.idSelect} .c-select__selected`),s=document.querySelector(`#${this.idSelect} .c-select__input-div`),i=document.querySelector(`#${this.idSelect} .c-select__arrow-icon`);t.classList.contains("active")&&this.isClickedOutside(e)&&(t.classList.remove("active"),s.classList.remove("active"),i.classList.remove("active"),this.dropdown.classList.remove("active"))}isClickedOutside(e){return this.isOutside=!0,["c-select__selected","c-select__input-div","c-select__input","c-select__dropdown-item","c-select__dropdown","c-select__arrow","c-select__arrow-icon","c-select__selected-div","c-select__selected-p","c-select__selected-remove"].forEach((t=>e.target.classList.contains(t)?this.isOutside=!1:void 0)),this.isOutside}handleKeyboard(e){e.target.classList.contains("c-select__dropdown-item")&&((e.keyCode===this.ENTER_KEY_CODE||e.keyCode===this.SPACEBAR_KEY_CODE)&&this.handleClick(e),e.keyCode===this.UP_KEY_CODE&&this.dropdownItems.forEach(((t,s)=>{t===e.target&&(s>1?this.dropdownItems[s-1].dispatchEvent(new Event("focus")):this.dropdownItems[this.dropdownItems.length-1].dispatchEvent(new Event("focus")))})),e.keyCode===this.DOWN_KEY_CODE&&this.dropdownItems.forEach(((t,s)=>{t===e.target&&(s<this.dropdownItems.length-1?this.dropdownItems[s+1].dispatchEvent(new Event("focus")):this.dropdownItems[1].dispatchEvent(new Event("focus")))})))}filterOptionItems(){document.querySelector(`#${this.idSelect} .c-select__input`).addEventListener("input",(e=>{this.dropdownItems.forEach(((t,s)=>{t.textContent.toLowerCase().includes(e.target.value.toLowerCase())||0===s?t.classList.remove("isHidden"):t.classList.add("isHidden")})),[...this.dropdownItems].filter((e=>e.classList.contains("isHidden"))).length===this.dropdownItems.length-1?this.firstOptionItem.textContent="no results":this.firstOptionItem.textContent=""}))}createHTML(){const e="c-select",t="c-select__option-list",s="c-select__selected",i="c-select__input-div",c="c-select__input",l="c-select__dropdown",n="c-select__dropdown-item",d="c-select__arrow",o=this.createElement("input",c,[["type","text"]]),r=this.createElement("ul",l,[["data-id",this.idSelect]]),a=this.createElement("li",n);r.appendChild(a);let h=this.createElement("div",e);h.style.width=`${this.select.offsetWidth}px`,this.select.parentNode.insertBefore(h,this.select),h.appendChild(this.select),this.select.classList.add("select-hidden");const _=h;_.id=this.idSelect,h=this.createElement("div",t),_.appendChild(h);const u=_.querySelector(`.${t}`);h=this.createElement("div",s,[["data-id",this.idSelect]]),!this.isMulti&&h.classList.add("c-select__selected_single"),u.appendChild(h);const p=u.querySelector(`.${s}`);h=this.createElement("div",d),h.innerHTML=`<svg width="14px" height="14px" viewBox="0 0 1024 1024" class="c-select__arrow-icon" \n        data-id = ${this.idSelect}><path d="M903.232 256l56.768 50.432L512 768 64 306.432 120.768 256 512 659.072z"\n        fill="#000000" /></svg>`,p.appendChild(h),h=this.createElement("div",i,[["data-id",this.idSelect]]),u.appendChild(h);const m=u.querySelector(`.${i}`);m.appendChild(o),m.appendChild(r)}createElement(e,t,s){const i=document.createElement(e);if(t&&(i.className=t),!s)return i;for(const e of s)i.setAttribute(e[0],e[1]);return i}}var i=t.Z;export{i as default};
//# sourceMappingURL=main.min.js.map